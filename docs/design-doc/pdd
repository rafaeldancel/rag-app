# Product Design Document (PDD): **Logos**

**Version:** 4.1 (Final)

**Tech Stack:** React, TypeScript, Monorepo (Turborepo), Firebase (Firestore, Auth), Vertex AI (Gemini 3 Flash).

---

## Executive Summary

**Logos** is a dynamic, evidence-based mentorship platform that bridges the gap between secular logic and spiritual formation. By integrating the **YouVersion API** for scripture and **Vertex AI** for a personalized assistant named **Peter**, Logos provides a non-coercive, intellectually rigorous path for exploring the Christian worldview.

---

## Epic 1: Dynamic Worldview Evolution & Onboarding

**Goal:** Establish a logical baseline to calibrate Peterâ€™s initial interaction style without enforcing a static personality.

- **User Story 1.1 (The Worldview Audit):** As a user, I want to identify my starting baseline via a **3-axis sliding scale survey** so Peter avoids "preachy" jargon and prioritizes pure logic where necessary.
- **Axes:** Epistemology (Evidence vs. Intuition), Openness (Skeptic vs. Seeker), Metaphysics (Materialist vs. Supernaturalist).

- **User Story 1.2 (Topic Discovery):** As a user, I want Peter to suggest 3â€“5 initial "Discovery Topics" (e.g., _â€œThe Historicity of the New Testamentâ€_) based on my audit results to jumpstart my inquiry.
- **User Story 1.3 (Companion Initialization):** As a user, I want to initialize **Peter**, my fixed AI Mentor, by selecting a voice profile (e.g., _Pragmatic_ or _Reflective_) to ensure the verbal interaction feels personal and consistent.

---

## Epic 2: The "Mentor" RAG Assistant (Peter)

**Goal:** Provide high-fidelity, low-latency guidance grounded in an "Evidence Hierarchy" with strict factual guardrails.

- **User Story 2.1 (Contextual RAG):** As a user, I want Peter to retrieve and analyze data based specifically on the current topic I am exploring to prevent information overload.
- **User Story 2.2 (Anti-Hallucination Guardrail):** As a user, I want Scripture and historical claims to be accurate and verifiable.
- **Logic:** Peter must pull literal quotes from the **YouVersion API**. If Peter is summarizing or unsure, he must state: _"I am paraphrasing this principle."_

- **User Story 2.3 (Citation Transparency):** As a researcher, I want Peter to provide clickable citations for every historical claim, linking directly to the source document or the Bible reader.
- **User Story 2.4 (Personal Context Memory):** As a user, I want Peter to reference my **Firestore-stored diary entries and highlights** to maintain continuity in our ongoing mentorship.

---

## Epic 3: Professional Bible Reader & Interaction Suite

**Goal:** Create a high-performance reading environment where user insights directly feed the AI's understanding.

- **User Story 3.1 (Multi-Translation Access):** As a user, I want to switch between Bible versions (NASB, ESV, NIV) via the **YouVersion API** to compare literal and thought-for-thought translations.
- **User Story 3.2 (The Peter Action Modal):** As a reader, I want to select a verse and access a modal with three options: **Highlight**, **Note**, or **Ask Peter about this logic/verse**.
- **User Story 3.3 (Annotated Bible State):** As a user, I want my notes and highlights indexed into a vector store so Peter "remembers" my reflections and provides deeper insights during chat.

---

## Epic 4: Lifestyle & Progress Tracking

**Goal:** Transition from theory to consistent practice through a discovery-based dashboard with full user agency.

- **User Story 4.1 (Today Section Settings):** As a user, I want a settings menu to toggle visibility for the **Verse of the Day**, **Daily Prayer**, and **AI Insights** so the "Today" experience never feels enforced.
- **User Story 4.2 (The Constellation Progress Map):** As a user, I want to visualize my journey on a **non-linear map** that tracks "Discovered Topics" and "Habit Milestones" rather than conversion levels.
- **Data Tracked:** Topics Explored, Questions Asked, Sentiment Trends, and Engagement Streaks.

- **User Story 4.3 (Dual-Depth Diary Insights):** As a user, I want Peter to offer two levels of reflection:

1. **Immediate Insight:** Upon saving a single entry, Peter provides a specific reflection on that thought.
2. **Aggregate Insight:** On the main Diary page, Peter provides a "General Wisdom" summary based on the trajectory of **all** saved entries.

---

## ðŸ› ï¸ Technical Design & Industry Standards

### 1. Vectorized Memory (Firestore + Vertex)

- User notes and diary entries are converted into **embeddings** using Vertex AI.
- When Peter is asked a question, a **Cosine Similarity** search is performed on the user's personal Firestore collection to inject "Personal Context" into the prompt.

### 2. The "Peter" System Instruction (Logic Bridge)

Peter operates under a strict system instruction:

> _"You are Peter, an intellectually rigorous mentor. You lead with logic and historical evidence for users with 'Materialist' baselines. You only bridge to spiritual application as the user's 'Openness' score increases. Never use Christianese jargon without defining it first."_

### 3. Monitoring & Quality

- **Success Metric:** Time-to-Value (how quickly a user finds a 'Topic Suggestion' that leads to a deep-dive).
- **Safety:** Peter is prohibited from giving medical or professional legal advice, defaulting instead to biblical/historical perspectives on ethics.

---
